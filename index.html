<!DOCTYPE html>
<title>Justin Leong</title>
<meta charset="utf-8">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Justin Leong's Blog">
<link href=atom.xml rel=alternate type=application/atom+xml>

<p>
  <a href=https://github.com/omegaphoenix>github</a>
  <a href=atom.xml>rss</a>
</p>
<h1><a href=#>Justin Leong's Blog</a></h1>
<ul id=c>{% for post in site.posts %}{% unless post.tags contains 'creative' %}<li><a href={{ post.url | replace_first: '/', ''}}>{{ post.title | escape}}</a><b>{{ post.date | date: "%-d %b %y" }}</b><p>{% for tag in post.tags %}<a>{{tag}}</a>{% endfor %}</li>{% endunless %}{% endfor %}</ul>
<script>
(function(){
  'use strict';
  var tags = {};
  var indexes = {};
  var currentTag = null;
  var container = document.getElementById('c');
  var items = container.children;
  for (var i = 0, icount = items.length; i < icount; i++){
    var item = items[i];
    var tagContainer = item.getElementsByTagName('p')[0]
    if (tagContainer == null) { continue }
    for (var j = 0, jcount = tagContainer.children.length; j < jcount; j++) {
      var tag = tagContainer.children[j]
      var tagName = tag.innerHTML;
      if (!tags[tagName]) { tags[tagName] = []; }
      if (!indexes[tagName]) { indexes[tagName] = []; }
      tags[tagName].push(tag);
      indexes[tagName].push(item);
    }
  }
  container.onclick = function(e) {
    var target = e ? e.target : window.event.srcElement;
    if (target.tagName != 'A' || target.parentNode.tagName != 'P') return true;
    var tag = target.innerHTML;
    if (tag == currentTag) showAll();
    else show(tag);
  }
  function showAll() {
    toggleItems(items, 'block');
    toggleTags('');
    currentTag = null;
    top.location.hash = '';
  }
  function show(tag) {
    if (!indexes[tag]) return;
    toggleItems(items, 'none');
    toggleTags('');
    toggleItems(indexes[tag], 'block')
    currentTag = tag;
    toggleTags('active');
    top.location.hash = tag;
    document.body.scrollTop = document.documentElement.scrollTop = 0;
  }
  function toggleItems(items, display) {
    for (var i = 0, length = items.length; i < length; i++) {
      items[i].style.display = display;
    }
  }
  function toggleTags(className) {
    if (currentTag == null) return;
    var t = tags[currentTag];
    for (var i = 0, length = t.length; i < length; i++) {
      t[i].className = className;
    }
  }
  window.onhashchange = function() {
    var tag = top.location.hash.substr(1, top.location.hash.length);
    if (!tag && currentTag != null) {
      showAll()
    } else if (tag != currentTag) {
      show(tag);
    }
  }
  if (top.location.hash) window.onhashchange();
})();
</script>
